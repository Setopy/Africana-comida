import{a as v,A as w,j as e,O as c}from"./index-d9119759.js";import{r as l}from"./vendor-5fe3892a.js";import"./router-51faa6cb.js";const L=()=>{const[u,h]=l.useState([]),[k,p]=l.useState(!0),[t,n]=l.useState(null),[d,g]=l.useState("all"),[m,y]=l.useState(""),[x,f]=l.useState({type:"",text:""});l.useEffect(()=>{j()},[]);const j=async()=>{try{p(!0);const s=await v.get(`${w}/api/orders`);h(s.data)}catch(s){console.error("Error fetching orders:",s)}finally{p(!1)}},C=async(s,a)=>{var r,o;try{await v.put(`${w}/api/orders/${s}/status`,{status:a}),h(u.map(i=>i._id===s?{...i,status:a}:i)),t&&t._id===s&&n({...t,status:a}),f({type:"success",text:"Order status updated successfully"})}catch(i){f({type:"error",text:((o=(r=i.response)==null?void 0:r.data)==null?void 0:o.message)||"Failed to update order status"})}},b=u.filter(s=>{const a=d==="all"||s.status===d,r=m.toLowerCase(),o=m===""||s._id.toLowerCase().includes(r)||s.customer.name.toLowerCase().includes(r)||s.customer.email.toLowerCase().includes(r)||s.customer.phone.toLowerCase().includes(r);return a&&o}),N=s=>{const a={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(s).toLocaleDateString(void 0,a)};return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Manage Orders"}),x.text&&e.jsx("div",{className:`mt-4 p-4 rounded-md ${x.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:x.text}),e.jsxs("div",{className:"mt-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"relative max-w-xs",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),e.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:border-amber-500 focus:ring-amber-500 sm:text-sm",placeholder:"Search orders...",value:m,onChange:s=>y(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status-filter",className:"sr-only",children:"Filter by status"}),e.jsxs("select",{id:"status-filter",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm rounded-md",value:d,onChange:s=>g(s.target.value),children:[e.jsx("option",{value:"all",children:"All Statuses"}),Object.keys(c).map(s=>e.jsx("option",{value:s,children:c[s].text},s))]})]}),e.jsxs("button",{onClick:j,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500",children:[e.jsx("svg",{className:"-ml-1 mr-2 h-5 w-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]}),e.jsx("div",{className:"mt-8",children:k?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-amber-600"})}):b.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"align-middle inline-block min-w-full",children:e.jsx("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(s=>{const a=c[s.status]||{color:"gray",text:s.status};return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["#",s._id.slice(-6)]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.customer.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.customer.email})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:N(s.createdAt)})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",s.totalAmount.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-${a.color}-100 text-${a.color}-800`,children:a.text})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("button",{onClick:()=>n(s),className:"text-amber-600 hover:text-amber-900",children:"View Details"})})]},s._id)})})]})})})}):e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[e.jsx("p",{className:"text-gray-500",children:"No orders found matching your criteria."}),(d!=="all"||m!=="")&&e.jsx("button",{onClick:()=>{g("all"),y("")},className:"mt-4 px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Clear Filters"})]})})]}),t&&e.jsx("div",{className:"fixed inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:()=>n(null)}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"â€‹"}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsx("div",{className:"sm:flex sm:items-start",children:e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[e.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:["Order #",t._id.slice(-6)]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Placed on ",N(t.createdAt)]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Customer Information"}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-sm text-gray-900",children:["Name: ",t.customer.name]}),e.jsxs("p",{className:"text-sm text-gray-900",children:["Email: ",t.customer.email]}),e.jsxs("p",{className:"text-sm text-gray-900",children:["Phone: ",t.customer.phone]}),e.jsxs("p",{className:"text-sm text-gray-900",children:["Address: ",t.customer.address]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Order Items"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[t.items.map((s,a)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:[s.quantity,"x"]})," ",s.name]}),e.jsxs("div",{className:"text-gray-900",children:["$",(s.price*s.quantity).toFixed(2)]})]},a)),e.jsxs("div",{className:"pt-2 border-t border-gray-200 flex justify-between text-sm font-medium",children:[e.jsx("div",{children:"Total"}),e.jsxs("div",{children:["$",t.totalAmount.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Payment Information"}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-sm text-gray-900",children:["Method: ",t.paymentMethod]}),e.jsxs("p",{className:"text-sm text-gray-900",children:["Status: ",t.paymentStatus||"pending"]})]})]}),t.deliveryInstructions&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Delivery Instructions"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.deliveryInstructions})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Update Status"}),e.jsx("div",{className:"mt-1 flex rounded-md shadow-sm",children:e.jsx("select",{id:"status",name:"status",value:t.status,onChange:s=>C(t._id,s.target.value),className:"focus:ring-amber-500 focus:border-amber-500 flex-1 block w-full rounded-md sm:text-sm border-gray-300",children:Object.keys(c).map(s=>e.jsx("option",{value:s,children:c[s].text},s))})})]})]})]})})}),e.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:e.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:()=>n(null),children:"Close"})})]})]})})]})};export{L as default};
