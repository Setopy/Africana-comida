import{a as m,A as x,j as e}from"./index-d9119759.js";import{r as n}from"./vendor-5fe3892a.js";import"./router-51faa6cb.js";const w=()=>{const[d,o]=n.useState([]),[f,p]=n.useState(!0),[l,u]=n.useState("all"),[c,i]=n.useState({type:"",text:""});n.useEffect(()=>{h()},[]);const h=async()=>{try{p(!0);const s=await m.get(`${x}/api/reviews/admin`);o(s.data)}catch(s){console.error("Error fetching reviews:",s)}finally{p(!1)}},y=async s=>{var a,r;try{await m.put(`${x}/api/reviews/${s}/approve`),o(d.map(t=>t._id===s?{...t,approved:!0}:t)),i({type:"success",text:"Review approved successfully"})}catch(t){i({type:"error",text:((r=(a=t.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to approve review"})}},v=async s=>{var a,r;if(window.confirm("Are you sure you want to delete this review?"))try{await m.delete(`${x}/api/reviews/${s}`),o(d.filter(t=>t._id!==s)),i({type:"success",text:"Review deleted successfully"})}catch(t){i({type:"error",text:((r=(a=t.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to delete review"})}},g=d.filter(s=>l==="all"?!0:l==="approved"?s.approved:l==="pending"?!s.approved:!0);return e.jsx("div",{className:"min-h-screen bg-gray-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Manage Reviews"}),c.text&&e.jsx("div",{className:`mt-4 p-4 rounded-md ${c.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:c.text}),e.jsxs("div",{className:"mt-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"filter",className:"sr-only",children:"Filter reviews"}),e.jsxs("select",{id:"filter",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm rounded-md",value:l,onChange:s=>u(s.target.value),children:[e.jsx("option",{value:"all",children:"All Reviews"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"pending",children:"Pending Approval"})]})]}),e.jsxs("button",{onClick:h,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500",children:[e.jsx("svg",{className:"-ml-1 mr-2 h-5 w-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]}),e.jsx("div",{className:"mt-8",children:f?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-amber-600"})}):g.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:g.map(s=>e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"inline-flex items-center justify-center h-10 w-10 rounded-full bg-amber-100",children:e.jsx("span",{className:"font-medium text-amber-800",children:s.name.charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.email})]})]}),e.jsx("div",{children:s.approved?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Approved"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Pending"})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[[...Array(5)].map((a,r)=>e.jsx("svg",{className:`w-5 h-5 ${r<s.rating?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},r)),e.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:[s.rating,"/5"]})]}),e.jsx("p",{className:"text-sm text-gray-800",children:s.comment}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:new Date(s.createdAt).toLocaleDateString()}),s.menuItem&&e.jsxs("div",{className:"mt-2 text-xs text-amber-600",children:["For: ",s.menuItem.name||s.menuItem]})]}),e.jsxs("div",{className:"mt-4 flex justify-end space-x-4",children:[!s.approved&&e.jsx("button",{onClick:()=>y(s._id),className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none",children:"Approve"}),e.jsx("button",{onClick:()=>v(s._id),className:"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-red-700 bg-white hover:bg-gray-50 focus:outline-none",children:"Delete"})]})]})},s._id))}):e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[e.jsx("p",{className:"text-gray-500",children:"No reviews found matching your criteria."}),l!=="all"&&e.jsx("button",{onClick:()=>u("all"),className:"mt-4 px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Show All Reviews"})]})})]})})};export{w as default};
