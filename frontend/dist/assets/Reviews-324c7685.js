import{j as e,a as u,A as b}from"./index-d9119759.js";import{r as l}from"./vendor-5fe3892a.js";import"./router-51faa6cb.js";const w=()=>{const[d,g]=l.useState([]),[p,f]=l.useState(!0),[r,x]=l.useState({name:"",email:"",rating:5,comment:""}),[n,h]=l.useState(!1),[i,c]=l.useState({type:"",text:""});l.useEffect(()=>{(async()=>{try{const a=await u.get(`${b}/api/reviews`);g(a.data)}catch(a){console.error("Error fetching reviews:",a)}finally{f(!1)}})()},[]);const m=s=>{const{name:a,value:t}=s.target;x(o=>({...o,[a]:a==="rating"?parseInt(t):t}))},j=async s=>{var a,t;s.preventDefault(),h(!0),c({type:"",text:""});try{await u.post(`${b}/api/reviews`,r),c({type:"success",text:"Thank you for your review! It will be visible after approval."}),x({name:"",email:"",rating:5,comment:""})}catch(o){c({type:"error",text:((t=(a=o.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to submit review. Please try again."})}finally{h(!1)}};return e.jsx("div",{className:"bg-amber-50 min-h-screen py-12",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-amber-900 mb-8 text-center",children:"Customer Reviews"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md mb-12 overflow-hidden",children:[e.jsxs("div",{className:"p-6 bg-amber-900 text-white",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Share Your Experience"}),e.jsx("p",{className:"text-amber-100 mt-1",children:"We'd love to hear what you think about our food and service!"})]}),e.jsxs("div",{className:"p-6",children:[i.text&&e.jsx("div",{className:`mb-6 p-4 rounded-md ${i.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:i.text}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-amber-500 focus:border-amber-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-amber-500 focus:border-amber-500",required:!0})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rating"}),e.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(s=>e.jsxs("label",{className:"flex items-center mr-4",children:[e.jsx("input",{type:"radio",name:"rating",value:s,checked:r.rating===s,onChange:m,className:"sr-only"}),e.jsx("svg",{className:`w-8 h-8 ${r.rating>=s?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),e.jsx("span",{className:"ml-1",children:s})]},s))})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"comment",className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Review"}),e.jsx("textarea",{id:"comment",name:"comment",value:r.comment,onChange:m,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-amber-500 focus:border-amber-500",required:!0})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{type:"submit",disabled:n,className:`px-6 py-2 bg-amber-600 text-white rounded-md ${n?"opacity-70 cursor-not-allowed":"hover:bg-amber-700"}`,children:n?"Submitting...":"Submit Review"})})]})]})]}),e.jsx("h2",{className:"text-2xl font-bold text-amber-900 mb-6",children:"What Our Customers Say"}),p?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-amber-600"})}):d.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:d.map(s=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("div",{className:"flex items-center mb-4",children:[...Array(5)].map((a,t)=>e.jsx("svg",{className:`w-5 h-5 ${t<s.rating?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},t))}),e.jsx("p",{className:"text-gray-700 mb-4",children:s.comment}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(s.createdAt).toLocaleDateString()})]}),s.menuItem&&e.jsxs("span",{className:"text-sm text-amber-600",children:["Reviewed: ",s.menuItem.name]})]})]},s._id))}):e.jsx("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:e.jsx("p",{className:"text-gray-600",children:"No reviews yet. Be the first to share your experience!"})})]})})};export{w as default};
